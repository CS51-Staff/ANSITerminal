<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ANSITerminal (ANSITerminal.ANSITerminal)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">ANSITerminal</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">ANSITerminal</span></h1></header><p>This module offers basic control of ANSI compliant terminals and
the windows shell.</p><p>The functions below do not send ANSI codes (i.e., do nothing or
only print the output) when then output is not connected to a TTY.
Functions providing information (such as <a href="index.html#val-pos_cursor">pos_cursor</a>) fail when
in that situation.
TTY detection is configurable by changing the value of <a href="index.html#val-isatty">isatty</a>.</p><p>This library is not thread safe.</p><ul class="at-tag"><li><span class="at-tag author">Author</span>: Christophe Troestler (Christophe.Troestler@umons.ac.be)</li><li><span class="at-tag author">Author</span>: Vincent Hugot (vincent.hugot@gmail.com)</li></ul><h3>Colors and style</h3><div class="spec type" id="type-color"><a href="#type-color" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>color</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-color.Black" class="anchored"><td class="def constructor"><a href="#type-color.Black" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Black</span></code></td></tr><tr id="type-color.Red" class="anchored"><td class="def constructor"><a href="#type-color.Red" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Red</span></code></td></tr><tr id="type-color.Green" class="anchored"><td class="def constructor"><a href="#type-color.Green" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Green</span></code></td></tr><tr id="type-color.Yellow" class="anchored"><td class="def constructor"><a href="#type-color.Yellow" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Yellow</span></code></td></tr><tr id="type-color.Blue" class="anchored"><td class="def constructor"><a href="#type-color.Blue" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Blue</span></code></td></tr><tr id="type-color.Magenta" class="anchored"><td class="def constructor"><a href="#type-color.Magenta" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Magenta</span></code></td></tr><tr id="type-color.Cyan" class="anchored"><td class="def constructor"><a href="#type-color.Cyan" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Cyan</span></code></td></tr><tr id="type-color.White" class="anchored"><td class="def constructor"><a href="#type-color.White" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">White</span></code></td></tr><tr id="type-color.Default" class="anchored"><td class="def constructor"><a href="#type-color.Default" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Default</span></code></td><td class="doc"><p>(** Default color of the terminal *)</p></td></tr></table><code></code></div><div class="doc"><p>Available colors.</p></div></div><div class="spec type" id="type-style"><a href="#type-style" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>style</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-style.Reset" class="anchored"><td class="def constructor"><a href="#type-style.Reset" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Reset</span></code></td></tr><tr id="type-style.Bold" class="anchored"><td class="def constructor"><a href="#type-style.Bold" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Bold</span></code></td></tr><tr id="type-style.Underlined" class="anchored"><td class="def constructor"><a href="#type-style.Underlined" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Underlined</span></code></td></tr><tr id="type-style.Blink" class="anchored"><td class="def constructor"><a href="#type-style.Blink" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Blink</span></code></td></tr><tr id="type-style.Inverse" class="anchored"><td class="def constructor"><a href="#type-style.Inverse" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Inverse</span></code></td></tr><tr id="type-style.Hidden" class="anchored"><td class="def constructor"><a href="#type-style.Hidden" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Hidden</span></code></td></tr><tr id="type-style.Foreground" class="anchored"><td class="def constructor"><a href="#type-style.Foreground" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Foreground</span><span class="keyword"> of </span><a href="index.html#type-color">color</a></code></td></tr><tr id="type-style.Background" class="anchored"><td class="def constructor"><a href="#type-style.Background" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Background</span><span class="keyword"> of </span><a href="index.html#type-color">color</a></code></td></tr></table><code></code></div><div class="doc"><p>Various styles for the text. <code class="code">Blink</code> and <code class="code">Hidden</code> may not work on
every terminal.</p></div></div><div class="spec val" id="val-black"><a href="#val-black" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>black : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Black</code></p></div></div><div class="spec val" id="val-red"><a href="#val-red" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>red : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Red</code></p></div></div><div class="spec val" id="val-green"><a href="#val-green" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>green : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Green</code></p></div></div><div class="spec val" id="val-yellow"><a href="#val-yellow" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>yellow : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Yellow</code></p></div></div><div class="spec val" id="val-blue"><a href="#val-blue" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>blue : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Blue</code></p></div></div><div class="spec val" id="val-magenta"><a href="#val-magenta" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>magenta : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Magenta</code></p></div></div><div class="spec val" id="val-cyan"><a href="#val-cyan" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cyan : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Cyan</code></p></div></div><div class="spec val" id="val-white"><a href="#val-white" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>white : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground White</code></p></div></div><div class="spec val" id="val-default"><a href="#val-default" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>default : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Foreground Default</code></p></div></div><div class="spec val" id="val-on_black"><a href="#val-on_black" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_black : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Black</code></p></div></div><div class="spec val" id="val-on_red"><a href="#val-on_red" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_red : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Red</code></p></div></div><div class="spec val" id="val-on_green"><a href="#val-on_green" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_green : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Green</code></p></div></div><div class="spec val" id="val-on_yellow"><a href="#val-on_yellow" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_yellow : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Yellow</code></p></div></div><div class="spec val" id="val-on_blue"><a href="#val-on_blue" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_blue : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Blue</code></p></div></div><div class="spec val" id="val-on_magenta"><a href="#val-on_magenta" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_magenta : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Magenta</code></p></div></div><div class="spec val" id="val-on_cyan"><a href="#val-on_cyan" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_cyan : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Cyan</code></p></div></div><div class="spec val" id="val-on_white"><a href="#val-on_white" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_white : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background White</code></p></div></div><div class="spec val" id="val-on_default"><a href="#val-on_default" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>on_default : <a href="index.html#type-style">style</a></code></div><div class="doc"><p>Shortcut for <code class="code">Background Default</code></p></div></div><div class="spec val" id="val-set_autoreset"><a href="#val-set_autoreset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_autoreset : bool <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Turns the autoreset feature on and off. It defaults to on.</p></div></div><div class="spec val" id="val-print_string"><a href="#val-print_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_string : <a href="index.html#type-style">style</a> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">print_string attr txt</code> prints the string <code class="code">txt</code> with the
attibutes <code class="code">attr</code>. After printing, the attributes are
automatically reseted to the defaults, unless autoreset is turned
off.</p></div></div><div class="spec val" id="val-prerr_string"><a href="#val-prerr_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>prerr_string : <a href="index.html#type-style">style</a> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Like <code class="code">print_string</code> but prints on the standard error.</p></div></div><div class="spec val" id="val-printf"><a href="#val-printf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>printf : <a href="index.html#type-style">style</a> list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, unit, string, unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">printf attr format arg1 ... argN</code> prints the arguments
<code class="code">arg1</code>,...,<code class="code">argN</code> according to <code class="code">format</code> with the attibutes <code class="code">attr</code>.
After printing, the attributes are automatically reseted to the
defaults, unless autoreset is turned off.</p></div></div><div class="spec val" id="val-eprintf"><a href="#val-eprintf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>eprintf : <a href="index.html#type-style">style</a> list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, unit, string, unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Same as <a href="index.html#val-printf">printf</a> but prints the result on <code class="code">stderr</code>.</p></div></div><div class="spec val" id="val-sprintf"><a href="#val-sprintf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sprintf : <a href="index.html#type-style">style</a> list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, unit, string) Pervasives.format <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Same as <a href="index.html#val-printf">printf</a> but returns the result in a string. This only
works on ANSI compliant terminals — for which escape sequences are
used — and not under Windows — where system calls are required.
On Windows, it is identical to the standard <code class="code">sprintf</code>.</p></div></div><h3>Erasing</h3><div class="spec type" id="type-loc"><a href="#type-loc" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>loc</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-loc.Eol" class="anchored"><td class="def constructor"><a href="#type-loc.Eol" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Eol</span></code></td></tr><tr id="type-loc.Above" class="anchored"><td class="def constructor"><a href="#type-loc.Above" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Above</span></code></td></tr><tr id="type-loc.Below" class="anchored"><td class="def constructor"><a href="#type-loc.Below" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Below</span></code></td></tr><tr id="type-loc.Screen" class="anchored"><td class="def constructor"><a href="#type-loc.Screen" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Screen</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-erase"><a href="#val-erase" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>erase : <a href="index.html#type-loc">loc</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">erase Eol</code> clear from the cursor position to the end of the line
without moving the cursor.
<code class="code">erase Above</code> erases everything before the position of the cursor.
<code class="code">erase Below</code> erases everything after the position of the cursor.
<code class="code">erase Screen</code> erases the whole screen.</p><p>This function does not modify the position of the cursor.</p></div></div><h3>Cursor</h3><div class="spec val" id="val-set_cursor"><a href="#val-set_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_cursor : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">set_cursor x y</code> puts the cursor at position <code class="code">(x,y)</code>, <code class="code">x</code>
indicating the column (the leftmost one being 1) and <code class="code">y</code> being the
line (the topmost one being 1). If <code class="code">x &lt;= 0</code>, the <code class="code">x</code> coordinate
is unchanged; if <code class="code">y &lt;= 0</code>, the <code class="code">y</code> coordinate is unchanged.</p></div></div><div class="spec val" id="val-move_cursor"><a href="#val-move_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>move_cursor : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">move_cursor x y</code> moves the cursor by <code class="code">x</code> columns (to the right
if <code class="code">x &gt; 0</code>, to the left if <code class="code">x &lt; 0</code>) and by <code class="code">y</code> lines (downwards if
<code class="code">y &gt; 0</code> and upwards if <code class="code">y &lt; 0</code>).</p></div></div><div class="spec val" id="val-move_bol"><a href="#val-move_bol" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>move_bol : unit <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">move_bol()</code> moves the cursor to the beginning of the current
line. This is useful for progress bars for example.</p></div></div><div class="spec val" id="val-pos_cursor"><a href="#val-pos_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pos_cursor : unit <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int</code></div><div class="doc"><p><code class="code">pos_cursor()</code> returns a couple <code class="code">(x,y)</code> giving the current
position of the cursor, <code class="code">x &gt;= 1</code> being the column and <code class="code">y &gt;= 1</code> the
row.</p></div></div><div class="spec val" id="val-save_cursor"><a href="#val-save_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>save_cursor : unit <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">save_cursor()</code> saves the current position of the cursor.</p></div></div><div class="spec val" id="val-restore_cursor"><a href="#val-restore_cursor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>restore_cursor : unit <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">restore_cursor()</code> replaces the cursor to the position saved
with <code class="code">save_cursor()</code>.</p></div></div><h3>Size</h3><div class="spec val" id="val-resize"><a href="#val-resize" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>resize : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">resize width height</code> resize the current terminal to the given
<code class="code">width</code> and <code class="code">height</code>.</p></div></div><div class="spec val" id="val-size"><a href="#val-size" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>size : unit <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int</code></div><div class="doc"><p><code class="code">size()</code> returns a pair <code class="code">(width, height)</code> giving the size of the
terminal in character cells.</p></div></div><h3>Scrolling</h3><div class="spec val" id="val-scroll"><a href="#val-scroll" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>scroll : int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">scroll n</code> scrolls the terminal by <code class="code">n</code> lines, up (creating new
lines at the bottom) if <code class="code">n &gt; 0</code> and down if <code class="code">n &lt; 0</code>.</p></div></div><h3>TTY</h3><div class="spec val" id="val-isatty"><a href="#val-isatty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>isatty : (Unix.file_descr <span class="keyword">&#8209;&gt;</span> bool) Pervasives.ref</code></div><div class="doc"><p>Function used to detect whether the current output is connected to
a TTY. Defaults to <code class="code">Unix.isatty</code>.</p></div></div></body></html>